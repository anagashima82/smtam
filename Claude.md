# Marp講義資料スライド作成アシスタント

## プロジェクト概要
このプロジェクトは、Marpを使った講義資料用スライドの作成をサポートするものです。カスタムテーマを使用した統一感のあるスライド作成を支援します。

## 必ず守ること
- 修正後はプレビューフォルダに画像を出力し、その結果を直接確認してください
- **スライド作成時は必ず `SLIDE_RULES.md` を参照してルールに従ってください**

---

## スライド作成ルール
新しいスライドを作成する際は、**SLIDE_RULES.md** を必ず参照してください。
このファイルには以下の内容が含まれています：
- ファイル構成（フロントマター）
- スライドの基本構成
- 見出しルール
- レイアウトパターン（1カラム、2カラム、3カラム）
- スタイル要素（太字、丸数字、画像配置）
- コンテンツガイドライン
- テンプレート例

---

## プロジェクト構成

### メインファイル
- **base.md** - メインのスライドファイル
  - カスタムテーマ（custom）を使用
  - SAMURAIブランドのスライドテンプレート

### カスタムテーマ
- **場所**: `.marp/themes/custom.css`
- **特徴**:
  - 赤色（#CC0000）をベースカラーとしたSAMURAIテーマ
  - 見出し2は赤背景に白文字
  - 本文やリストはピンク色（#FFE5E5）の背景ボックス
  - 2カラムレイアウト対応（`.flex`クラス）

### ディレクトリ構成
```
Marpスライド検証/
├── .marp/
│   └── themes/
│       └── custom.css     # カスタムテーマファイル
├── .vscode/
│   └── settings.json      # VS Code設定（Marpテーマ指定）
├── base.md                # メインスライドファイル
└── base_output.pdf        # 出力されたPDF
```

---

## PDF出力方法

### 必須コマンド
カスタムテーマを適用してPDF出力する際は、必ず`--theme-set`オプションを使用してください。

```bash
npx @marp-team/marp-cli base.md --theme-set .marp/themes/custom.css -o base_output.pdf
```

### 重要事項
- `--theme-set`オプションなしで出力すると、CSSが適用されません
- VS Codeのプレビューには `.vscode/settings.json` でテーマを指定済み
- PDF出力後は必ず内容を確認してください

---

## スライド構成ルール

### アジェンダスライドの要件
base.mdのセクション3（アジェンダ）では、以下の要件を満たす必要があります：

1. **見出し1（`#`）**: 最低1ページに2つ以上
2. **見出し2（`##`）**: 最低3つ以上
3. **番号形式**: ❶、❷、❸などの丸数字を使用

### 現在のアジェンダ構成
```markdown
## アジェンダ

# 見出し1-A
[説明文]
❶ [項目1]
❷ [項目2]

# 見出し1-B
[説明文]
❸ [項目3]
❹ [項目4]

## 見出し2-A
[説明文]
❺ [項目5]

## 見出し2-B
[説明文]
❻ [項目6]

## 見出し2-C
[説明文]
❼ [項目7]
```

---

## スライドテンプレート

### 1カラムレイアウト
```markdown
## [セクションタイトル]

[導入文や概要]

- [ポイント1]
- [ポイント2]
- [ポイント3]
```

### 2カラムレイアウト
```markdown
## [セクションタイトル] (2カラム)

<div class="flex sa">
<div>

### [左カラムのタイトル]

[左カラムの内容]

- [ポイント1]
- [ポイント2]

</div>
<div>

### [右カラムのタイトル]

[右カラムの内容]

- [ポイント1]
- [ポイント2]

</div>
</div>
```

---

## 作業フロー

### スライド作成時の基本フロー
1. Markdownファイルを編集
2. **プレビューフォルダをクリア（重要！）**
3. **Marp CLIでプレビュー画像を出力（必須）**
4. **プレビュー画像を確認してセルフチェック**
5. 問題点があれば修正し、ステップ2に戻る
6. 最終確認後、必要に応じてPDF/PPTXを出力

### プレビュー画像の出力方法（必須手順）

#### 推奨：プレビューフォルダをクリアしてから出力
```bash
# previewフォルダ内のファイルを削除してから画像を出力
rm -rf preview/* && npx @marp-team/marp-cli [ファイル名].md --theme-set .marp/themes/custom.css --images png -o preview/[ファイル名].png --html

# 例：sql.mdの場合
rm -rf preview/* && npx @marp-team/marp-cli sql.md --theme-set .marp/themes/custom.css --images png -o preview/sql.png --html
```

**重要**:
- プレビューフォルダを毎回クリアすることで、古い画像ファイルとの混同を防ぐ
- 出力後は必ずプレビュー画像を開いて内容を確認する
- 固定名で出力することでファイル名を覚えやすくする

#### オプション：タイムスタンプ付きで出力
```bash
# 履歴を残したい場合
npx @marp-team/marp-cli [ファイル名].md --theme-set .marp/themes/custom.css --images png -o preview/[ファイル名]_$(date +%Y%m%d_%H%M%S).png --html
```

### PDF出力方法
```bash
npx @marp-team/marp-cli [ファイル名].md --theme-set .marp/themes/custom.css -o [ファイル名]_output.pdf --html
```

### PPTX出力方法
```bash
npx @marp-team/marp-cli [ファイル名].md --theme-set .marp/themes/custom.css -o [ファイル名]_output.pptx --html
```

**注意**: PPTXはPowerPointの仕様上、CSSのすべてのスタイルが完全には再現されません。編集が必要な場合に使用してください。

### セルフチェック項目
プレビュー画像を確認する際は、以下の項目をチェックしてください：

#### デザイン・スタイル
- [ ] 赤色のヘッダーバーが表示されているか
- [ ] 見出し2が赤背景に白文字になっているか
- [ ] 本文やリストがピンク色（#FFE5E5）の背景ボックスになっているか
- [ ] 太字（`**テキスト**`）が正しく赤色で表示されているか
- [ ] フッターが正しく表示されているか（フォントサイズも確認）
- [ ] ページ番号が表示されているか

#### レイアウト
- [ ] 2カラムレイアウトが正しく表示されているか
- [ ] 3カラムレイアウトが正しく表示されているか
- [ ] 表（テーブル）が正しく表示されているか
- [ ] 画像が中央寄せされているか（`.image-center`使用時）

#### コンテンツ
- [ ] すべてのページに内容が表示されているか（空白ページがないか）
- [ ] テキストの改行位置が適切か
- [ ] 文字が切れたり重なったりしていないか
- [ ] 章番号（「1章」など）が正しく表示されているか

---

## トラブルシューティング

### CSSが適用されない場合
**原因**: `--theme-set`オプションを指定していない

**解決方法**:
```bash
# ❌ 間違い
npx @marp-team/marp-cli base.md -o base_output.pdf

# ✅ 正しい
npx @marp-team/marp-cli base.md --theme-set .marp/themes/custom.css -o base_output.pdf
```

### VS Codeプレビューでテーマが表示されない場合
**原因**: Marp拡張機能がインストールされていない、または設定が正しくない

**解決方法**:
1. Marp for VS Code拡張機能をインストール
2. `.vscode/settings.json`を確認:
```json
{
  "markdown.marp.themes": [
    ".marp/themes/custom.css"
  ]
}
```

### 太字（**テキスト**）が正しく表示されない場合
**原因**: リスト項目内やピンク背景ボックス内の太字がカスタムCSSで適切にスタイリングされない

**解決方法**: `<div class="no-bg">` で太字テキストを囲む
```markdown
# ❌ 正しく表示されない場合
**重要なテキスト**を通してデータベースを操作します。

- ポイント1
- ポイント2

# ✅ 正しい書き方
<div class="no-bg">

**重要なテキストを通してデータベースを操作します。**

</div>

- ポイント1
- ポイント2
```

**適用例**:
- セクションの導入文で太字を強調したい場合
- 見出しの直下で重要なポイントを太字で示したい場合
- まとめページで各セクションの見出しを太字で表示したい場合

---

## 今後の開発方針

### カスタムテーマの活用
- custom.cssを基に新しいスタイルを追加可能
- 色の変更は custom.css 内の #CC0000 と #FFE5E5 を置換

### テンプレートの拡張
- 3カラムレイアウトの追加
- 画像配置パターンの追加
- コードブロックのスタイル強化

### 出力形式
- PDF（現在サポート済み）
- HTML（追加可能）
- PPTX（追加可能）

---

## 参考情報

### Marp公式ドキュメント
- https://marpit.marp.app/
- https://github.com/marp-team/marp-cli

### カスタムテーマ作成
- Marpit CSS Theme: https://marpit.marp.app/theme-css

---

**最終更新**: 2025-11-01
**作成者**: Claude Code Assistant
